<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <div th:fragment="summary-section(executionTracker, cacheStats)" th:with="
        totalDurationMs=${executionTracker.getOverallDuration().toMillis()},
        cacheSize=${cacheStats != null ? cacheStats.size() : 0},
        cacheHits=${cacheStats != null ? cacheStats.hitCount() : 0},
        cacheMisses=${cacheStats != null ? cacheStats.missCount() : 0},
        totalCacheAccess=${cacheStats != null ? (cacheStats.hitCount() + cacheStats.missCount()) : 0},
        cacheHitRate=${totalCacheAccess > 0 ? (cacheHits * 100.0 / totalCacheAccess) : 0.0}">

        <h2>Test Execution Summary</h2>
        <div class="execution-info">
            <div class="execution-detail">
                <strong>Executed via:</strong> <span th:text="${executionEnvironment}">Unknown</span>
            </div>
            <div class="execution-detail">
                <strong>Execution Time:</strong> <span th:text="${#temporals.format(executionTimestamp, 'yyyy-MM-dd HH:mm:ss')}">2025-01-01 12:00:00</span>
            </div>
            <div class="execution-detail">
                <strong>Time Zone:</strong> <span th:text="${timeZone}">UTC</span>
            </div>
        </div>
        <div class="summary-grid">
            <div class="summary-card">
                <h3>Cache Size</h3>
                <div class="value" th:text="${cacheSize}">0</div>
            </div>
            <div class="summary-card">
                <h3>Cache Hits</h3>
                <div class="value" th:text="${cacheHits}">0</div>
            </div>
            <div class="summary-card">
                <h3>Cache Misses</h3>
                <div class="value" th:text="${cacheMisses}">0</div>
            </div>
            <div class="summary-card">
                <h3>Cache Hit Rate</h3>
                <div class="value" style="font-size: 24px;" th:text="${#numbers.formatDecimal(cacheHitRate, 1, 1) + '%'}">0%</div>
            </div>
            <div class="summary-card">
                <h3>Total Runtime</h3>
                <div class="value" style="font-size: 24px;" th:text="${durationFormatter.format(totalDurationMs)}">0ms</div>
            </div>
            <div th:if="${availableProcessors != null and availableProcessors > 0}" class="summary-card">
                <h3>Available Processors</h3>
                <div class="value" th:text="${availableProcessors}">0</div>
            </div>
            <div class="summary-card help-card">
                <h3>Need Help?</h3>
                <div class="help-content">
                    <a th:href="@{'https://pragmatech.digital/' + ${utmParameters}}" target="_blank" class="help-link">
                      Cut Your Test Execution Time in Half
                    </a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
